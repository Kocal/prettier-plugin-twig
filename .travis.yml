dist: trusty

language: node_js
node_js:
  - 8
  - 10
  - 11
  - node

branches:
  except:
    - /^v\d+\.\d+\.\d+$/

notifications:
  email: false

cache:
  directories:
    - ~/.nvm
    - ./node_modules

before_install:
  - npm i -g yarn
  - yarn global add codecov

install:
  - yarn install --frozen-lockfile

script:
  - yarn run build-standalone
  - yarn run test && codecov

jobs:
  include:
    - stage: Release
      if: type = push AND branch = master
      node_js: node
      script:
        - yarn run build-standalone
        #- yarn run semantic-release
